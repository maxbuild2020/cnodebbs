{"remainingRequest":"/Users/frank/Desktop/project-demo/nodebbs/node_modules/babel-loader/lib/index.js!/Users/frank/Desktop/project-demo/nodebbs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/frank/Desktop/project-demo/nodebbs/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/frank/Desktop/project-demo/nodebbs/src/home/components/mainlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/frank/Desktop/project-demo/nodebbs/src/home/components/mainlist.vue","mtime":1594540314979},{"path":"/Users/frank/Desktop/project-demo/nodebbs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/frank/Desktop/project-demo/nodebbs/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/frank/Desktop/project-demo/nodebbs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/frank/Desktop/project-demo/nodebbs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2ZyYW5rL0Rlc2t0b3AvcHJvamVjdC1kZW1vL25vZGViYnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLzxhLXBhZ2luYXRpb24gdi1tb2RlbD0iY3VycmVudCIgOnRvdGFsPSI1MCIgc2hvdy1sZXNzLWl0ZW1zIC8+CmltcG9ydCB1dGlscyBmcm9tICIuLi8uLi9mbi91dGlscyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJtYWluTGlzdCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2F0aW9uUGFnZTogNSwKICAgICAgcGFnZTogMSwKICAgICAgcGVycGFnZTogMjAsCiAgICAgIHBvc3Q6IFtdLAogICAgICBwb3N0czogW10sCiAgICAgIHNlYXJjaEtleTogewogICAgICAgIHRhYjogImFsbCIsCiAgICAgICAgbWRyZW5kZXI6IHRydWUKICAgICAgfQogICAgfTsKICB9LAogIGZpbHRlcnM6IHsKICAgIHRpbWVyQ291bnQ6IGZ1bmN0aW9uIHRpbWVyQ291bnQodmFsdWUpIHsKICAgICAgbW9tZW50LmxvY2FsZSgiemgtY24iKTsKICAgICAgcmV0dXJuIG1vbWVudCh2YWx1ZSkuc3RhcnRPZigiZGF5IikuZnJvbU5vdygpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBhZ2VzOiBmdW5jdGlvbiBwYWdlcygpIHsKICAgICAgdmFyIHBhZ2VzID0gW107CiAgICAgIHRoaXMucG9zdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICB2YXIgcGFnZSA9IE1hdGguZmxvb3IoaW5kZXggLyAyMCk7CgogICAgICAgIGlmICghcGFnZXNbcGFnZV0pIHsKICAgICAgICAgIHBhZ2VzW3BhZ2VdID0gW107CiAgICAgICAgfQoKICAgICAgICBwYWdlc1twYWdlXS5wdXNoKGl0ZW0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHBhZ2VzOwogICAgfSwKICAgIHZpc2libGVQYWdlczogZnVuY3Rpb24gdmlzaWJsZVBhZ2VzKCkgewogICAgICB2YXIgdmlzaWJsZVBhZ2VzID0gW107CiAgICAgIHRoaXMucGFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZpc2libGVQYWdlcyA9IGl0ZW07CiAgICAgIH0pOwogICAgICByZXR1cm4gdmlzaWJsZVBhZ2VzOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRhYlZhbHVlLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGFiVmFsdWUgPSBfdGhpcy4kcm91dGUucXVlcnkudGFiOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL2Nub2RlanMub3JnL2FwaS92MS90b3BpY3MiLCB7CiAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIHRhYjogdGFiVmFsdWUsCiAgICAgICAgICAgICAgICAgICAgbWRyZW5kZXI6IHRydWUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5wb3N0cyA9IHJlcy5kYXRhLmRhdGE7IC8vIGNvbnNvbGUubG9nKHRoaXMucG9zdHMpCgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRUYWJJbmZvOiBmdW5jdGlvbiBnZXRUYWJJbmZvKHRhYiwgZ29vZCwgdG9wLCBpc0NsYXNzKSB7CiAgICAgIHJldHVybiB1dGlscy5nZXRUYWJJbmZvKHRhYiwgZ29vZCwgdG9wLCBpc0NsYXNzKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldERhdGEoKTsKICAgIGNvbnNvbGUubG9nKHNlc3Npb25TdG9yYWdlLnVzZXJUb2tlbiA9PSB0cnVlKTsKICB9LAogIHdhdGNoOiB7CiAgICAkcm91dGU6IGZ1bmN0aW9uICRyb3V0ZSh0bykgewogICAgICAvLyBjb25zb2xlLmxvZyhmcm9tKQogICAgICBpZiAodG8ucXVlcnkgJiYgdG8ucXVlcnkudGFiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hLZXkudGFiID0gdG8ucXVlcnkudGFiOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VhcmNoS2V5LnRhYik7CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["mainlist.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"panel\">\n      <div class=\"header\">\n        <router-link :to=\"{query:{tab:'all'}}\" :class=\"{'active':$route.query.tab ==='all'}\">\n          <span>全部</span>\n        </router-link>\n        <router-link :to=\"{query:{tab:'good'}}\" :class=\"{'active':$route.query.tab ==='good'}\">\n          <span>精华</span>\n        </router-link>\n        <router-link :to=\"{query:{tab:'share'}}\" :class=\"{'active':$route.query.tab ==='share'}\">\n          <span>分享</span>\n        </router-link>\n        <router-link :to=\"{query:{tab:'ask'}}\" :class=\"{'active':$route.query.tab ==='ask'}\">\n          <span>问题</span>\n        </router-link>\n        <router-link :to=\"{query:{tab:'job'}}\" :class=\"{'active':$route.query.tab ==='job'}\">\n          <span>招聘</span>\n        </router-link>\n      </div>\n      <div class=\"inner-content border-bottom\" v-for=\"post in visiblePages\" :key=\"post.id\">\n        <img :src=\"post.author.avatar_url\" />\n        <span class=\"reply_count\">{{post.reply_count}}/{{post.visit_count}}</span>\n        <router-link class=\"title-wrap\" :to=\"'/postview/'+ post.id\">\n          <h3\n            v-text=\"post.title\"\n            :class=\"getTabInfo(post.tab, post.good, post.top, true)\"\n            :title=\"getTabInfo(post.tab, post.good, post.top, false)\"\n          ></h3>\n        </router-link>\n        <span class=\"last-repy\">{{ post.last_reply_at | timerCount}}</span>\n      </div>\n        <div class=\"pageContainer\">\n          <ul class=\"pagesInner\">\n            <li class=\"page\"><i class=\"fa fa-chevron-left\" aria-hidden=\"true\"></i></li>\n            <li class=\"page\" v-for=\"(item, index) in pagationPage\" :key=\"index\">\n              <span>{{item}}</span>\n            </li>\n            <li class=\"page\"><i class=\"fa fa-chevron-right\" aria-hidden=\"true\"></i></li>\n          </ul>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//<a-pagination v-model=\"current\" :total=\"50\" show-less-items />\nimport utils from \"../../fn/utils\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nexport default {\n  name: \"mainList\",\n  data() {\n    return {\n      pagationPage: 5,\n      page: 1,\n      perpage: 20,\n      post: [],\n      posts: [],\n      searchKey: {\n        tab: \"all\",\n        mdrender: true\n      }\n    };\n  },\n  filters: {\n    timerCount: function(value) {\n      moment.locale(\"zh-cn\");\n      return moment(value)\n        .startOf(\"day\")\n        .fromNow();\n    }\n  },\n  computed: {\n    pages() {\n      const pages = [];\n      this.posts.forEach((item, index) => {\n        const page = Math.floor(index / 20);\n        if (!pages[page]) {\n          pages[page] = [];\n        }\n        pages[page].push(item);\n      });\n      return pages; \n    },\n    visiblePages () {\n      let visiblePages = []\n      this.pages.forEach((item)=>{\n        visiblePages= item\n      })\n      return visiblePages\n    }\n  },\n  methods: {\n    async getData() {\n      let tabValue = this.$route.query.tab;\n      let res = await axios.get(\"https://cnodejs.org/api/v1/topics\", {\n        params: {\n          tab: tabValue,\n          mdrender: true\n        }\n      });\n      this.posts = res.data.data;\n      // console.log(this.posts)\n    },\n    getTabInfo(tab, good, top, isClass) {\n      return utils.getTabInfo(tab, good, top, isClass);\n    }\n  },\n  mounted() {\n    this.getData();\n    console.log(sessionStorage.userToken == true);\n  },\n  watch: {\n    $route(to) {\n      // console.log(from)\n      if (to.query && to.query.tab) {\n        this.searchKey.tab = to.query.tab;\n        console.log(this.searchKey.tab);\n      }\n      this.getData();\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n.pageContainer{\n  .pagesInner{\n    li{\n      display: inline-block;\n    }\n  }\n}\n.panel {\n  margin-right: 6.2rem;\n  min-width: 10rem;\n}\n.header {\n  background: #f6f6f6;\n  height: 0.8rem;\n  padding-left: 0.3rem;\n  a {\n    float: left;\n    margin: 0.2rem 0.2rem;\n    height: 0.4rem;\n    line-height: 0.45rem;\n    color: #75aa02;\n    font-size: 0.3rem;\n    border-radius: 0.05rem;\n  }\n  .active {\n    color: white;\n    background: #75aa02;\n  }\n}\n\n.inner-content {\n  background-color: white;\n  display: flex;\n  padding: 0.1rem 0.2rem;\n  align-items: center;\n  img {\n    width: 0.6rem;\n  }\n  .title-wrap {\n    width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    color: inherit;\n  }\n  h3 {\n    font-size: 0.3rem;\n    display: block;\n    padding: 0.2rem 0;\n    text-align: left;\n    &:before {\n      content: attr(title);\n      padding: 0.02rem 0.01rem 0.03rem 0.01rem;\n      font-size: 0.2rem;\n      margin: 0 0.1rem;\n      color: white;\n      width: 0.2rem;\n      border-radius: 0.06rem;\n    }\n    &.top:before {\n      background: #75aa02;\n    }\n    &.good:before {\n      background: #75aa02;\n    }\n    &.ask:before,\n    &.share:before,\n    &.job:before {\n      background: #ccc;\n    }\n  }\n  .reply_count {\n    padding: 0 0.1rem;\n    width: 1.2rem;\n    min-width: 1.2rem;\n    font-size: 0.2rem;\n  }\n  .last-repy {\n    width: 1.8rem;\n    min-width: 1.8rem;\n  }\n}\n  \n</style>\n"],"sourceRoot":"src/home/components"}]}